{% extends "base.html" %}
{% block title %}{{ block.super }} | Planning {% endblock %}
{% block main %}
	<h1>Planning</h1>
	<br/>

	<button id="create-user">Create new user</button>
	<div id="soutenanceForm">
		<form action="{% url 'addSoutenance' %}" method="post">{% csrf_token %}
			<table>
				{{ form.as_table }}
			</table>
			<input id="soutenanceSubmit" class="btn btn-success" type="submit" value="" />
		</form>
	</div>
	<div id="salleForm">
		<form action="{% url 'addSalle' %}" method="post">{% csrf_token %}
			<table>
				{{ salleForm.as_table }}
			</table>
			<input id="salleSubmit" class="btn btn-success" type="submit" value="" />
		</form>
	</div>

	<div>
		<label for="id_dateDebut">Soutenance du</label>
		<input id="id_dateDebut" />
		<label for="id_dateFin"> au </label>
		<input id="id_dateFin" />
	</div>
<div id="planning"></div>
{% endblock %}
{% block libraries %}{{ block.super }}
	<link href='/static/fullcalendar-1.6.4/fullcalendar/fullcalendar.css' rel='stylesheet' />
	<link href='/static/fullcalendar-1.6.4/fullcalendar/fullcalendar.print.css' rel='stylesheet' media='print' />
	<link rel="stylesheet" type="text/css" href="/static/css/smoothness/jquery-ui-1.10.4.custom.min.css" media="screen">

	<script src='/static/fullcalendar-1.6.4/lib/jquery.min.js'></script>
	<script src='/static/fullcalendar-1.6.4/lib/jquery-ui.custom.min.js'></script>
	<script src='/static/fullcalendar-1.6.4/fullcalendar/fullcalendar.min.js'></script>
	<script type="text/javascript" src="/static/js/jquery-ui-1.10.4.custom.min.js"></script>
	<script type="text/javascript" src="/static/js/utils.js"></script>
	<script type="text/javascript" src="/static/js/planning.js"></script>
{% endblock %}
{% block js %}

	$( document ).ready( function() {

		$('input[type=submit]').css('visibility', 'hidden');

		becomeDatePicker('#id_dateDebut');
		becomeDatePicker('#id_dateFin');
		becomeDatePicker('#id_datePassage');

		$('#id_dateDebut').change(function(){
			if($('#id_dateFin').val() && testArgs()){
				updatePlanning();
			}
		});
		$('#id_dateFin').change(function(){
			if($('#id_dateDebut').val() && testArgs()){
				updatePlanning();
			}
		});

		genDialogForm("#soutenanceForm", "#create-user", 500, 300, function(){
			$('#soutenanceSubmit').click();
			return false;
		});
		publierBoutonAjouterDialog('#id_salle', '#id_addSalle', "#salleForm", 500, 300, function(){
			$('#salleSubmit').click();
		});
	});

	active_tab="#tab-planning"
{% endblock %}